(function(){"use strict";var E=(o=>(o[o.NOTHING=0]="NOTHING",o[o.TRY_THINKING=1]="TRY_THINKING",o[o.MISTAKE=2]="MISTAKE",o[o.EASY_NAKED_SINGLE=3]="EASY_NAKED_SINGLE",o[o.NAKED_SINGLE=4]="NAKED_SINGLE",o[o.BOARD_FINISHED=5]="BOARD_FINISHED",o))(E||{});let S=Date.now(),d=0;const C=()=>{const o=Date.now();return d++,d>=4&&o-S<5e3?(d=0,[]):(S=o,null)},m=o=>{const t=new Map;for(let n=0;n<9;n++){t.clear();for(let e=0;e<9;e++){const s=n+e*9;if(o[s]!==null){if(t.has(o[s]))return[t.get(o[s]),{col:n,row:e}];t.set(o[s],{col:n,row:e})}}}for(let n=0;n<9;n++){t.clear();for(let e=0;e<9;e++){const s=e+n*9;if(o[s]!==null){if(t.has(o[s]))return[t.get(o[s]),{col:e,row:n}];t.set(o[s],{col:e,row:n})}}}for(let n=0;n<9;n+=3)for(let e=0;e<9;e+=3){t.clear();for(let s=0;s<3;s++)for(let u=0;u<3;u++){const f=n+s,i=e+u,a=f+i*9;if(o[a]!==null){if(t.has(o[a]))return[t.get(o[a]),{col:f,row:i}];t.set(o[a],{col:f,row:i})}}}return null},g=(o,t,n)=>{const e=n%9,s=Math.floor(n/9);for(let l=0;l<9;l++){const r=s*9+l,c=e+l*9;if(r!==n&&o[r]===t||c!==n&&o[c]===t)return!1}const u=Math.floor(s/3)*3,f=Math.floor(e/3)*3,i=u+3,a=f+3;for(let l=u;l<i;l++)for(let r=f;r<a;r++){const c=l*9+r;if(c!==n&&o[c]===t)return!1}return!0},M=o=>{const t=[1,2,3,4,5,6,7,8,9];for(const n of t){const e=[],s=[];for(let l=0;l<9;l++)for(let r=0;r<9;r++){const c=l+r*9;o[c]===n&&(e.push(l),s.push(r))}const u=[0,1,2,3,4,5,6,7,8].filter(l=>!e.includes(l)),f=[0,1,2,3,4,5,6,7,8].filter(l=>!s.includes(l)),i=new Map;for(let l=0;l<u.length;l++)o:for(let r=0;r<f.length;r++){const c=u[l],I=f[r],w=c+I*9;if(o[w]!==null)continue;const x=Math.floor(I/3)*3,h=Math.floor(c/3)*3,k=x+3,K=h+3;for(let b=x;b<k;b++)for(let N=h;N<K;N++){const G=b*9+N;if(o[G]===n)continue o}const R=`${h}x${x}`;i.has(R)?i.set(R,{count:i.get(R).count+1,col:c,row:I}):i.set(R,{count:1,col:c,row:I})}const a=[...i.entries()].find(([,l])=>l.count===1);if(a){const{col:l,row:r}=a[1];return[{col:l,row:r}]}}return null},A=o=>{for(let t=0;t<o.length;t++){if(o[t]!==null)continue;const n=t%9,e=Math.floor(t/9),s=[1,2,3,4,5,6,7,8,9],u=[];o:for(;s.length;){const f=s.pop();for(let c=0;c<9;c++){const I=e*9+c,w=n+c*9;if(I!==t&&o[I]===f||w!==t&&o[w]===f)continue o}const i=Math.floor(e/3)*3,a=Math.floor(n/3)*3,l=i+3,r=a+3;for(let c=i;c<l;c++)for(let I=a;I<r;I++){const w=c*9+I;if(w!==t&&o[w]===f)continue o}u.push(f)}if(u.length===1)return[{col:n,row:e}]}return null},D=o=>{for(let t=0;t<o.length;t++){const n=o[t];if(n===null||!g(o,n,t))return null}return[]},_={[1]:C,[2]:m,[3]:M,[4]:A,[5]:D},j=({data:{cells:o}})=>{const t=Object.keys(E).map(n=>parseInt(n,10)).filter(n=>!Number.isNaN(n));for(const n of t){if(n===0)continue;const e=_[n](o);if(e)return{type:n,cells:e}}return{type:0,cells:[]}};onmessage=({data:{cells:o}})=>{const t=j({data:{cells:o}});postMessage(JSON.stringify(t))}})();
