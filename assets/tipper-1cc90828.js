(function(){"use strict";var R=(n=>(n[n.NOTHING=0]="NOTHING",n[n.EASY_NAKED_SINGLE=1]="EASY_NAKED_SINGLE",n[n.NAKED_SINGLE=2]="NAKED_SINGLE",n[n.BOARD_FINISHED=3]="BOARD_FINISHED",n))(R||{});const w=(n,o,t,l)=>{for(let e=0;e<9;e++){const f=l*9+e,s=t+e*9;if(f!==l&&n[f]===o||s!==t&&n[s]===o)return!1}const d=Math.floor(l/3)*3,i=Math.floor(t/3)*3,a=d+3,r=i+3,c=l*9+t;for(let e=d;e<a;e++)for(let f=i;f<r;f++){const s=e*9+f;if(s!==c&&n[s]===o)return!1}return!0},N=n=>{for(let o=0;o<n.length;o++){if(n[o]!==null)continue;const t=o%9,l=Math.floor(o/9),d=[1,2,3,4,5,6,7,8,9],i=[];n:for(;d.length;){const r=d.pop(),c=Math.floor(l/3)*3,e=Math.floor(t/3)*3,f=c+3,s=e+3;for(let u=c;u<f;u++)for(let I=e;I<s;I++){const h=u*9+I;if(h!==o&&n[h]===r)continue n}i.push(r)}const a=new Set;for(let r=0;r<9;r++){const c=t+r*9;if(c!==o&&n[c]===null)for(const e of i)w(n,e,r,l)||a.add(e)}if(i.filter(a.has,a).length===1)return[{col:t,row:l}];a.clear();for(let r=0;r<9;r++){const c=l*9+r;if(c!==o&&n[c]===null)for(const e of i)w(n,e,t,r)||a.add(e)}if(i.filter(a.has,a).length===1)return[{col:t,row:l}]}return null},E=n=>{for(let o=0;o<n.length;o++){if(n[o]!==null)continue;const t=o%9,l=Math.floor(o/9),d=[1,2,3,4,5,6,7,8,9],i=[];n:for(;d.length;){const a=d.pop();for(let s=0;s<9;s++){const u=l*9+s,I=t+s*9;if(u!==o&&n[u]===a||I!==o&&n[I]===a)continue n}const r=Math.floor(l/3)*3,c=Math.floor(t/3)*3,e=r+3,f=c+3;for(let s=r;s<e;s++)for(let u=c;u<f;u++){const I=s*9+u;if(I!==o&&n[I]===a)continue n}i.push(a)}if(i.length===1)return[{col:t,row:l}]}return null},S=n=>{for(let o=0;o<n.length;o++){const t=n[o];if(t===null||!w(n,t,o%9,Math.floor(o/9)))return null}return[]},g={[1]:N,[2]:E,[3]:S};onmessage=({data:{cells:n}})=>{const o=Object.keys(R).map(t=>parseInt(t,10)).filter(t=>!Number.isNaN(t));for(const t of o){if(t===0)continue;const l=g[t](n);if(l){postMessage(JSON.stringify({type:t,cells:l}));return}}postMessage(JSON.stringify({type:0,cells:[]}))}})();
